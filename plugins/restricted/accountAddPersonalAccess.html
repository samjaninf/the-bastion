<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>accountAddPersonalAccess &mdash; The Bastion 3.16.99-rc1 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/thebastion.css" type="text/css" />
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="accountCreate" href="accountCreate.html" />
    <link rel="prev" title="restricted plugins" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> The Bastion
          </a>
              <div class="version">
                3.16.99-rc1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Presentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../presentation/principles.html">Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../presentation/features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../presentation/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../installation/basic.html">Basic Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/advanced.html">Advanced Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/upgrading.html">Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/docker.html">Sandbox using Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation/restoring_from_backup.html">Restoring from backup</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Usage</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../using/basics/index.html">The basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using/piv.html">PIV keys support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using/sftp_scp.html">SFTP &amp; SCP support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using/http_proxy.html">HTTPS Proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using/api.html">JSON API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../using/specific_ssh_clients_tutorials/index.html">Specific SSH clients tutorials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Administration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../administration/configuration/index.html">Configuration files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/logs.html">Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/mfa.html">Multi-Factor Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/security_advisories.html">Security Advisories</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../development/setup.html">Environment setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/tests.html">Writing tests</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Plugins</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">admin plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../group-aclkeeper/index.html">group-aclkeeper plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../group-gatekeeper/index.html">group-gatekeeper plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../group-owner/index.html">group-owner plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../open/index.html">open plugins</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">restricted plugins</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">accountAddPersonalAccess</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#add-a-personal-server-access-to-an-account">Add a personal server access to an account</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plugin-configuration">Plugin configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#options">Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="accountCreate.html">accountCreate</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountDelPersonalAccess.html">accountDelPersonalAccess</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountDelete.html">accountDelete</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountFreeze.html">accountFreeze</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountGeneratePassword.html">accountGeneratePassword</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountGrantCommand.html">accountGrantCommand</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountInfo.html">accountInfo</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountList.html">accountList</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountListAccesses.html">accountListAccesses</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountListEgressKeys.html">accountListEgressKeys</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountListIngressKeys.html">accountListIngressKeys</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountListPasswords.html">accountListPasswords</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountMFAResetPassword.html">accountMFAResetPassword</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountMFAResetTOTP.html">accountMFAResetTOTP</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountModify.html">accountModify</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountPIV.html">accountPIV</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountRevokeCommand.html">accountRevokeCommand</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountUnexpire.html">accountUnexpire</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountUnfreeze.html">accountUnfreeze</a></li>
<li class="toctree-l2"><a class="reference internal" href="accountUnlock.html">accountUnlock</a></li>
<li class="toctree-l2"><a class="reference internal" href="groupCreate.html">groupCreate</a></li>
<li class="toctree-l2"><a class="reference internal" href="groupDelete.html">groupDelete</a></li>
<li class="toctree-l2"><a class="reference internal" href="realmCreate.html">realmCreate</a></li>
<li class="toctree-l2"><a class="reference internal" href="realmDelete.html">realmDelete</a></li>
<li class="toctree-l2"><a class="reference internal" href="realmInfo.html">realmInfo</a></li>
<li class="toctree-l2"><a class="reference internal" href="realmList.html">realmList</a></li>
<li class="toctree-l2"><a class="reference internal" href="rootListIngressKeys.html">rootListIngressKeys</a></li>
<li class="toctree-l2"><a class="reference internal" href="selfAddPersonalAccess.html">selfAddPersonalAccess</a></li>
<li class="toctree-l2"><a class="reference internal" href="selfDelPersonalAccess.html">selfDelPersonalAccess</a></li>
<li class="toctree-l2"><a class="reference internal" href="whoHasAccessTo.html">whoHasAccessTo</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">The Bastion</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">restricted plugins</a> &raquo;</li>
      <li>accountAddPersonalAccess</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/plugins/restricted/accountAddPersonalAccess.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="accountaddpersonalaccess">
<h1>accountAddPersonalAccess<a class="headerlink" href="#accountaddpersonalaccess" title="Permalink to this headline"></a></h1>
<section id="add-a-personal-server-access-to-an-account">
<h2>Add a personal server access to an account<a class="headerlink" href="#add-a-personal-server-access-to-an-account" title="Permalink to this headline"></a></h2>
<div class="cmdusage admonition">
<p class="admonition-title">usage</p>
<p>--osh accountAddPersonalAccess --account ACCOUNT --host HOST [OPTIONS]</p>
</div>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-account">
<span id="cmdoption-accountaddpersonalaccess-account"></span><span class="sig-name descname"><span class="pre">--account</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-account" title="Permalink to this definition"></a></dt>
<dd><p>Bastion account to add the access to</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-host">
<span id="cmdoption-accountaddpersonalaccess-host"></span><span class="sig-name descname"><span class="pre">--host</span></span><span class="sig-prename descclassname"> <span class="pre">HOST|IP|NET/CIDR</span></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-host" title="Permalink to this definition"></a></dt>
<dd><p>Host(s) to add access to, either a HOST which will be resolved to an IP immediately,</p>
<blockquote>
<div><p>or an IP, or a whole network using the NET/CIDR notation</p>
</div></blockquote>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-user">
<span id="cmdoption-accountaddpersonalaccess-user"></span><span class="sig-name descname"><span class="pre">--user</span></span><span class="sig-prename descclassname"> <span class="pre">USER</span></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-user" title="Permalink to this definition"></a></dt>
<dd><p>Specify which remote user should be allowed to connect as.</p>
<blockquote>
<div><p>Globbing characters '*' and '?' are supported, so you can specify a pattern
that will be matched against the actual remote user name.</p>
</div></blockquote>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-user-any">
<span id="cmdoption-accountaddpersonalaccess-user-any"></span><span class="sig-name descname"><span class="pre">--user-any</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-user-any" title="Permalink to this definition"></a></dt>
<dd><p>Synonym of '--user <a href="#id1"><span class="problematic" id="id2">*</span></a>', allows connecting as any remote user.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-port">
<span id="cmdoption-accountaddpersonalaccess-port"></span><span class="sig-name descname"><span class="pre">--port</span></span><span class="sig-prename descclassname"> <span class="pre">PORT</span></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-port" title="Permalink to this definition"></a></dt>
<dd><p>Remote port allowed to connect to</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-port-any">
<span id="cmdoption-accountaddpersonalaccess-port-any"></span><span class="sig-name descname"><span class="pre">--port-any</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-port-any" title="Permalink to this definition"></a></dt>
<dd><p>Allow access to any remote port</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-scpup">
<span id="cmdoption-accountaddpersonalaccess-scpup"></span><span class="sig-name descname"><span class="pre">--scpup</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-scpup" title="Permalink to this definition"></a></dt>
<dd><p>Allow SCP upload, you--bastion--&gt;server (omit --user in this case)</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-scpdown">
<span id="cmdoption-accountaddpersonalaccess-scpdown"></span><span class="sig-name descname"><span class="pre">--scpdown</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-scpdown" title="Permalink to this definition"></a></dt>
<dd><p>Allow SCP download, you&lt;--bastion--server (omit --user in this case)</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-sftp">
<span id="cmdoption-accountaddpersonalaccess-sftp"></span><span class="sig-name descname"><span class="pre">--sftp</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-sftp" title="Permalink to this definition"></a></dt>
<dd><p>Allow usage of the SFTP subsystem, you&lt;--bastion--&gt;server (omit --user in this case)</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-force-key">
<span id="cmdoption-accountaddpersonalaccess-force-key"></span><span class="sig-name descname"><span class="pre">--force-key</span></span><span class="sig-prename descclassname"> <span class="pre">FINGERPRINT</span></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-force-key" title="Permalink to this definition"></a></dt>
<dd><p>Only use the key with the specified fingerprint to connect to the server (cf selfListEgressKeys)</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-force-password">
<span id="cmdoption-accountaddpersonalaccess-force-password"></span><span class="sig-name descname"><span class="pre">--force-password</span></span><span class="sig-prename descclassname"> <span class="pre">HASH</span></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-force-password" title="Permalink to this definition"></a></dt>
<dd><p>Only use the password with the specified hash to connect to the server (cf accountListPasswords)</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-ttl">
<span id="cmdoption-accountaddpersonalaccess-ttl"></span><span class="sig-name descname"><span class="pre">--ttl</span></span><span class="sig-prename descclassname"> <span class="pre">SECONDS|DURATION</span></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-ttl" title="Permalink to this definition"></a></dt>
<dd><p>Specify a number of seconds (or a duration string, such as &quot;1d7h8m&quot;) after which the access will automatically expire</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-comment">
<span id="cmdoption-accountaddpersonalaccess-comment"></span><span class="sig-name descname"><span class="pre">--comment</span></span><span class="sig-prename descclassname"> <span class="pre">&quot;'ANY</span> <span class="pre">TEXT'&quot;</span></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-comment" title="Permalink to this definition"></a></dt>
<dd><p>Add a comment alongside this server. Quote it twice as shown if you're under a shell.</p>
</dd></dl>

<p>The access will work only if one of the account's personal egress public key has been copied to the remote server.
To get the list of an account's personal egress public keys, see <code class="docutils literal notranslate"><span class="pre">accountListEgressKeyss</span></code> and <code class="docutils literal notranslate"><span class="pre">selfListEgressKeys</span></code>.</p>
</section>
<section id="plugin-configuration">
<h2>Plugin configuration<a class="headerlink" href="#plugin-configuration" title="Permalink to this headline"></a></h2>
<section id="options">
<h3>Options<a class="headerlink" href="#options" title="Permalink to this headline"></a></h3>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-arg-widest_v4_prefix">
<span id="cmdoption-accountaddpersonalaccess-arg-widest-v4-prefix"></span><span id="cmdoption-accountAddPersonalAccess-arg-integer"></span><span id="cmdoption-accountaddpersonalaccess-arg-integer"></span><span id="cmdoption-accountAddPersonalAccess-arg-between"></span><span id="cmdoption-accountaddpersonalaccess-arg-between"></span><span class="sig-name descname"><span class="pre">widest_v4_prefix</span></span><span class="sig-prename descclassname"> <span class="pre">(optional</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">integer</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">between</span></span><span class="sig-prename descclassname"> <span class="pre">0</span> <span class="pre">and</span> <span class="pre">32)</span></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-arg-widest_v4_prefix" title="Permalink to this definition"></a></dt>
<dd><p>When specified, this limits the size of prefixes that can be added to an
ACL, e.g. 24 would not allow prefixes wider than /24 (such as /20 or
/16).
Note that this doesn't prevent users from adding thousands of ACLs to
cover a wide range of networks, but this helps ensuring ACLs such as
0.0.0.0/0 can't be added in a single command.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-accountAddPersonalAccess-arg-self_remote_user_only">
<span id="cmdoption-accountaddpersonalaccess-arg-self-remote-user-only"></span><span id="cmdoption-accountAddPersonalAccess-arg-boolean"></span><span id="cmdoption-accountaddpersonalaccess-arg-boolean"></span><span class="sig-name descname"><span class="pre">self_remote_user_only</span></span><span class="sig-prename descclassname"> <span class="pre">(optional</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">boolean)</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-accountAddPersonalAccess-arg-self_remote_user_only" title="Permalink to this definition"></a></dt>
<dd><p>When true, this only allows to add ACLs with the remote user being the
same than the account name, i.e. adding an access to a bastion account
named &quot;johndoe&quot; can only be done specifying this very account name as
the remote user name, with <code class="docutils literal notranslate"><span class="pre">accountAddPersonalAccess</span> <span class="pre">--user</span> <span class="pre">johndoe</span></code>.</p>
</dd></dl>

</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline"></a></h3>
<p>Configuration, in JSON format, must be in <code class="file docutils literal notranslate"><span class="pre">/etc/bastion/plugin.accountAddPersonalAccess.conf</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="hll"><span class="p">{</span><span class="w"> </span><span class="nt">&quot;widest_v4_prefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;self_remote_user_only&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</span></pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="restricted plugins" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="accountCreate.html" class="btn btn-neutral float-right" title="accountCreate" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, OVHcloud.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>